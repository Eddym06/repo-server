services:
  autoquiz-server:
    image: autoquiz-server:latest
    restart: unless-stopped
    environment:
      - PORT=3000
      - HOST=0.0.0.0
      - ENABLE_LOGGING=true
      - NODE_ENV=production
      - DATABASE_HOST=n8n_postgres
      - DATABASE_PORT=5432
      - DATABASE_NAME=n8n
      - DATABASE_USER=postgres
      - DATABASE_PASSWORD=7f5253d09cb2157c4921
    networks:
      - easypanel
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.autoquiz.rule=Host(`autoquiz.qdf2w3.easypanel.host`)"
      - "traefik.http.routers.autoquiz.entrypoints=https"
      - "traefik.http.routers.autoquiz.tls=true"
      - "traefik.http.routers.autoquiz.tls.certresolver=letsencrypt"
      - "traefik.http.services.autoquiz.loadbalancer.server.port=3000"
    deploy:
      resources:
        limits:
          memory: 512M
        reservations:
          memory: 256M

networks:
  easypanel:
    external: true
